# Generated by Django 6.0 on 2025-12-13 13:41

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('contenttypes', '0002_remove_content_type_name'),
        ('survey', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='ActivityLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('username', models.CharField(db_index=True, max_length=150)),
                ('action', models.CharField(choices=[('LOGIN', 'Login'), ('LOGOUT', 'Logout'), ('LOGIN_FAILED', 'Login Failed'), ('PASSWORD_CHANGED', 'Password Changed'), ('PASSWORD_RESET', 'Password Reset'), ('CREATE', 'Create'), ('READ', 'Read/View'), ('UPDATE', 'Update'), ('DELETE', 'Delete'), ('SURVEY_SUBMIT', 'Survey Submitted'), ('SURVEY_ASSIGN', 'Survey Assigned'), ('SURVEY_VERIFY', 'Survey Verified'), ('SURVEY_REJECT', 'Survey Rejected'), ('EXPORT', 'Data Export'), ('IMPORT', 'Data Import'), ('BULK_UPDATE', 'Bulk Update'), ('BULK_DELETE', 'Bulk Delete'), ('FILE_UPLOAD', 'File Upload'), ('FILE_DOWNLOAD', 'File Download'), ('FILE_DELETE', 'File Delete'), ('SETTINGS_CHANGE', 'Settings Changed'), ('ROLE_ASSIGNED', 'Role Assigned'), ('PERMISSION_CHANGED', 'Permission Changed')], db_index=True, max_length=50)),
                ('severity', models.CharField(choices=[('INFO', 'Information'), ('WARNING', 'Warning'), ('ERROR', 'Error'), ('CRITICAL', 'Critical')], default='INFO', max_length=20)),
                ('description', models.TextField()),
                ('object_id', models.PositiveIntegerField(blank=True, null=True)),
                ('model_name', models.CharField(blank=True, db_index=True, max_length=100)),
                ('object_repr', models.CharField(blank=True, max_length=200)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('request_method', models.CharField(blank=True, max_length=10)),
                ('request_path', models.CharField(blank=True, max_length=500)),
                ('changes', models.JSONField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, null=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('content_type', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='contenttypes.contenttype')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='activity_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Activity Log',
                'verbose_name_plural': 'Activity Logs',
                'db_table': 'activity_logs',
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['user', '-timestamp'], name='activity_lo_user_id_f065d0_idx'), models.Index(fields=['action', '-timestamp'], name='activity_lo_action_f5c228_idx'), models.Index(fields=['severity', '-timestamp'], name='activity_lo_severit_47f828_idx'), models.Index(fields=['model_name', '-timestamp'], name='activity_lo_model_n_842dbc_idx'), models.Index(fields=['content_type', 'object_id'], name='activity_lo_content_edc5bf_idx'), models.Index(fields=['ip_address', '-timestamp'], name='activity_lo_ip_addr_8ab505_idx')],
            },
        ),
        migrations.CreateModel(
            name='DataChangeLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('username', models.CharField(db_index=True, max_length=150)),
                ('object_id', models.PositiveIntegerField(blank=True, null=True)),
                ('object_repr', models.CharField(blank=True, max_length=200)),
                ('model_name', models.CharField(db_index=True, max_length=100)),
                ('app_label', models.CharField(max_length=100)),
                ('operation', models.CharField(choices=[('INSERT', 'Insert'), ('UPDATE', 'Update'), ('DELETE', 'Delete'), ('BULK_INSERT', 'Bulk Insert'), ('BULK_UPDATE', 'Bulk Update'), ('BULK_DELETE', 'Bulk Delete')], db_index=True, max_length=20)),
                ('old_values', models.JSONField(blank=True, null=True)),
                ('new_values', models.JSONField(blank=True, null=True)),
                ('changed_fields', models.JSONField(blank=True, null=True)),
                ('reason', models.TextField(blank=True)),
                ('metadata', models.JSONField(blank=True, null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('request_path', models.CharField(blank=True, max_length=500)),
                ('is_bulk_operation', models.BooleanField(default=False)),
                ('affected_count', models.PositiveIntegerField(default=1)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('content_type', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='contenttypes.contenttype')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='data_changes', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Data Change Log',
                'verbose_name_plural': 'Data Change Logs',
                'db_table': 'data_change_logs',
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['user', '-timestamp'], name='data_change_user_id_a859be_idx'), models.Index(fields=['model_name', '-timestamp'], name='data_change_model_n_2702ae_idx'), models.Index(fields=['operation', '-timestamp'], name='data_change_operati_c0b11c_idx'), models.Index(fields=['content_type', 'object_id'], name='data_change_content_04803f_idx'), models.Index(fields=['is_bulk_operation', '-timestamp'], name='data_change_is_bulk_8e5dbc_idx')],
            },
        ),
        migrations.CreateModel(
            name='ImportExportLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('operation', models.CharField(choices=[('IMPORT', 'Import'), ('EXPORT', 'Export')], db_index=True, max_length=20)),
                ('status', models.CharField(choices=[('INITIATED', 'Initiated'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('FAILED', 'Failed'), ('PARTIALLY_COMPLETED', 'Partially Completed')], db_index=True, default='INITIATED', max_length=30)),
                ('username', models.CharField(max_length=150)),
                ('model_name', models.CharField(db_index=True, max_length=100)),
                ('file_format', models.CharField(choices=[('CSV', 'CSV'), ('EXCEL', 'Excel (XLSX)'), ('JSON', 'JSON'), ('XML', 'XML'), ('PDF', 'PDF')], max_length=20)),
                ('file_name', models.CharField(max_length=500)),
                ('file_path', models.CharField(blank=True, max_length=1000)),
                ('file_size', models.BigIntegerField(blank=True, null=True)),
                ('total_records', models.PositiveIntegerField(default=0)),
                ('successful_records', models.PositiveIntegerField(default=0)),
                ('failed_records', models.PositiveIntegerField(default=0)),
                ('skipped_records', models.PositiveIntegerField(default=0)),
                ('errors', models.JSONField(blank=True, null=True)),
                ('warnings', models.JSONField(blank=True, null=True)),
                ('started_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('duration_seconds', models.PositiveIntegerField(blank=True, null=True)),
                ('filters', models.JSONField(blank=True, null=True)),
                ('options', models.JSONField(blank=True, null=True)),
                ('notes', models.TextField(blank=True)),
                ('metadata', models.JSONField(blank=True, null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='import_export_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Import/Export Log',
                'verbose_name_plural': 'Import/Export Logs',
                'db_table': 'import_export_logs',
                'ordering': ['-started_at'],
                'indexes': [models.Index(fields=['user', '-started_at'], name='import_expo_user_id_5fd4b6_idx'), models.Index(fields=['operation', '-started_at'], name='import_expo_operati_ce024b_idx'), models.Index(fields=['status', '-started_at'], name='import_expo_status_f49d37_idx'), models.Index(fields=['model_name', '-started_at'], name='import_expo_model_n_571464_idx')],
            },
        ),
        migrations.CreateModel(
            name='SystemError',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('severity', models.CharField(choices=[('DEBUG', 'Debug'), ('INFO', 'Information'), ('WARNING', 'Warning'), ('ERROR', 'Error'), ('CRITICAL', 'Critical')], db_index=True, max_length=20)),
                ('error_type', models.CharField(choices=[('VALIDATION', 'Validation Error'), ('DATABASE', 'Database Error'), ('API', 'API Error'), ('AUTHENTICATION', 'Authentication Error'), ('PERMISSION', 'Permission Error'), ('FILE_SYSTEM', 'File System Error'), ('EXTERNAL_SERVICE', 'External Service Error'), ('CONFIGURATION', 'Configuration Error'), ('RUNTIME', 'Runtime Error'), ('UNKNOWN', 'Unknown Error')], db_index=True, max_length=50)),
                ('error_code', models.CharField(blank=True, db_index=True, max_length=50)),
                ('error_message', models.TextField()),
                ('exception_type', models.CharField(blank=True, max_length=200)),
                ('stack_trace', models.TextField(blank=True)),
                ('module', models.CharField(blank=True, max_length=200)),
                ('function', models.CharField(blank=True, max_length=200)),
                ('line_number', models.PositiveIntegerField(blank=True, null=True)),
                ('username', models.CharField(blank=True, max_length=150)),
                ('request_method', models.CharField(blank=True, max_length=10)),
                ('request_path', models.CharField(blank=True, db_index=True, max_length=500)),
                ('request_data', models.JSONField(blank=True, null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('metadata', models.JSONField(blank=True, null=True)),
                ('is_resolved', models.BooleanField(db_index=True, default=False)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('resolution_notes', models.TextField(blank=True)),
                ('occurrence_count', models.PositiveIntegerField(default=1)),
                ('first_occurred_at', models.DateTimeField(auto_now_add=True)),
                ('last_occurred_at', models.DateTimeField(auto_now=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('resolved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='resolved_errors', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='system_errors', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'System Error',
                'verbose_name_plural': 'System Errors',
                'db_table': 'system_errors',
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['severity', '-timestamp'], name='system_erro_severit_1d017e_idx'), models.Index(fields=['error_type', '-timestamp'], name='system_erro_error_t_c99a08_idx'), models.Index(fields=['is_resolved', '-timestamp'], name='system_erro_is_reso_1509d1_idx'), models.Index(fields=['user', '-timestamp'], name='system_erro_user_id_8acb66_idx'), models.Index(fields=['error_code'], name='system_erro_error_c_e2292d_idx')],
            },
        ),
        migrations.CreateModel(
            name='VerificationLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('SUBMITTED', 'Survey Submitted for Verification'), ('ASSIGNED', 'Assigned to Verifier'), ('REASSIGNED', 'Reassigned to Different Verifier'), ('VERIFIED', 'Verified and Approved'), ('REJECTED', 'Rejected'), ('RESUBMITTED', 'Resubmitted After Rejection'), ('COMMENT_ADDED', 'Comment Added'), ('ATTACHMENT_ADDED', 'Attachment Added'), ('ATTACHMENT_REMOVED', 'Attachment Removed')], db_index=True, max_length=50)),
                ('previous_status', models.CharField(blank=True, max_length=20)),
                ('new_status', models.CharField(blank=True, max_length=20)),
                ('notes', models.TextField(blank=True)),
                ('rejection_reason', models.TextField(blank=True)),
                ('field_changes', models.JSONField(blank=True, null=True)),
                ('time_taken_minutes', models.PositiveIntegerField(blank=True, null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('new_verifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_verifications', to=settings.AUTH_USER_MODEL)),
                ('performed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verification_actions', to=settings.AUTH_USER_MODEL)),
                ('previous_verifier', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='previous_verifications', to=settings.AUTH_USER_MODEL)),
                ('survey', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='verification_logs', to='survey.survey')),
            ],
            options={
                'verbose_name': 'Verification Log',
                'verbose_name_plural': 'Verification Logs',
                'db_table': 'verification_logs',
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['survey', '-timestamp'], name='verificatio_survey__c98048_idx'), models.Index(fields=['action', '-timestamp'], name='verificatio_action_1426f5_idx'), models.Index(fields=['performed_by', '-timestamp'], name='verificatio_perform_bbcb72_idx'), models.Index(fields=['new_verifier', '-timestamp'], name='verificatio_new_ver_844877_idx')],
            },
        ),
    ]
